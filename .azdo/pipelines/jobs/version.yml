parameters:
- name: MajorVersion
- name: MinorVersion
- name: PatchVersion
- name: RevisionVersion

steps:
  - task: Bash@3
    displayName: Set version variables
    inputs:
      targetType: 'inline'
      script: |
        TRIMMED_VERSION=`echo $(MajorVersion).$(MinorVersion).$(PatchVersion).$(RevisionVersion) | sed 's/\.*$//g'`
        echo "##vso[task.setvariable variable=Version]$TRIMMED_VERSION"
        echo "##vso[task.setvariable variable=FileVersion]$(MajorVersion).$(MinorVersion).$[split(parameters['PatchVersion'], '-')[0]].$(Build.BuildId)"
        echo "##vso[task.setvariable variable=AssemblyVersion]$(MajorVersion).0.0.0"